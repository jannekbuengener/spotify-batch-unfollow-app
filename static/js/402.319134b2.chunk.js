"use strict";(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[402],{1896:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var n,r=s(885),i=s(2791),l=s(2982),a=s(1413),o=s(4537),c=s(1694),u=s.n(c),d=s.p+"static/media/default.b315bfa5ca1ef960e55f.png",f=s(184);!function(e){e.SELECTED="selected",e.SUCCEEEDED="succeeded",e.FAILED="failed"}(n||(n={}));var v,m=function(e){var t,s,n=e.artist,r=e.status,i=e.onClick,l=e.description;return(0,f.jsxs)("div",{className:u()("artist",r,{clickable:!!i}),onClick:i,children:[(0,f.jsx)("div",{className:"avatar",children:(0,f.jsx)("img",{src:null!==(t=null===(s=n.images[0])||void 0===s?void 0:s.url)&&void 0!==t?t:d,alt:"Artist ".concat(n.name)})}),(0,f.jsx)("h3",{className:"name",children:n.name}),l&&(0,f.jsx)("div",{className:"description",children:l})]})},h=s(374),x=function(e){return null===e||void 0===e},j=function(e){var t=e.value,s=e.placeholder,n=e.onChange;return(0,f.jsx)("input",{type:"text",placeholder:s,value:t,onChange:function(e){return n(e.target.value)}})},g=s(8699),N=function(e){var t=e.options,s=e.value,n=e.onChange;return(0,f.jsx)(g.ZP,{styles:{option:function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{background:t.isFocused?"#282828":"#121212",color:"#d8f3e0"})},control:function(e){return(0,a.Z)((0,a.Z)({},e),{},{border:"1px solid #d8f3e0",background:"#121212",borderRadius:"0"})},menu:function(e){return(0,a.Z)((0,a.Z)({},e),{},{background:"#121212",border:"1px solid #d8f3e0"})},singleValue:function(e){return(0,a.Z)((0,a.Z)({},e),{},{color:"#d8f3e0"})},valueContainer:function(e){return(0,a.Z)({},e)}},captureMenuScroll:!1,value:t.find((function(e){return e.id===s})),onChange:function(e){return function(e){return"object"===typeof e&&!x(e)&&"id"in e&&"label"in e}(e)&&n(e.id)},options:t})};!function(e){e[e.FIFTY=50]="FIFTY",e[e.TWENTY_FIVE=25]="TWENTY_FIVE",e[e.TEN=10]="TEN"}(v||(v={}));var E,p=[{label:v.TEN,id:v.TEN},{label:v.TWENTY_FIVE,id:v.TWENTY_FIVE},{label:v.FIFTY,id:v.FIFTY}],w=function(e){var t=e.viewSize,s=e.setViewSize,n=e.filterString,r=e.setFilterString;return(0,f.jsxs)("div",{className:"artist-list-options",children:[(0,f.jsx)("h2",{children:"View options"}),!x(n)&&r&&(0,f.jsxs)("div",{className:"filter-option",children:[(0,f.jsx)("label",{children:"Search artists:"}),(0,f.jsx)(j,{value:n,onChange:r})]}),!x(t)&&s&&(0,f.jsxs)("div",{className:"view-option",children:[(0,f.jsx)("label",{children:"Artists per page:"}),(0,f.jsx)(N,{value:t,onChange:s,options:p})]}),(0,f.jsx)("button",{className:"warning",onClick:function(){null===r||void 0===r||r(""),null===s||void 0===s||s(v.TEN)},children:"Reset"})]})},S=function(e){var t=e.artists,s=e.unfollowing,l=e.completed,a=e.header,o=(0,i.useState)(v.TEN),c=(0,r.Z)(o,2),u=c[0],d=c[1],x=(0,i.useState)(0),j=(0,r.Z)(x,2),g=j[0],N=j[1];(0,i.useEffect)((function(){N(0)}),[u]),(0,i.useEffect)((function(){l&&N(0)}),[l]);var E=t.filter((function(e){return e.status===n.FAILED})),p=l&&E.length>0?E:t;return(0,f.jsx)("div",{className:"unfollow-artists-list",children:(0,f.jsxs)("div",{className:"results-table",children:[(0,f.jsx)("div",{className:"results-table-options",children:(0,f.jsx)(w,{viewSize:u,setViewSize:d})}),(0,f.jsxs)("div",{className:"results-view",children:[a,s&&(0,f.jsx)(h.Z,{}),(0,f.jsx)("div",{className:"artist-list",children:p.slice(g*u,(g+1)*u).map((function(e){return(0,f.jsx)(m,{status:e.status,artist:e,description:e.error?"Could not unfollow. Error: ".concat(e.error.message):void 0},e.id)}))}),(0,f.jsxs)("div",{className:"pagination",children:[(0,f.jsx)("button",{className:"previous",onClick:function(){return N((function(e){return e-1}))},disabled:0===g,children:"Previous"}),(0,f.jsx)("button",{className:"next",onClick:function(){return N((function(e){return e+1}))},disabled:(g+1)*u>=t.length-1,children:"Next"})]})]})]})})},b=function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:n.SELECTED})},Z=function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:n.SUCCEEEDED})},C=function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:n.FAILED})},T=function(e){var t=e.artists,s=e.onComplete,n=(0,o.jk)(t),c=(0,r.Z)(n,3),u=c[0],d=c[1],v=c[2],m=(0,i.useState)([]),h=(0,r.Z)(m,2),x=h[0],j=h[1],g=(0,i.useState)([]),N=(0,r.Z)(g,2),E=N[0],p=N[1];return(0,i.useEffect)((function(){j(u.map((function(e){return e.failedArtists.map((function(t){return(0,a.Z)((0,a.Z)({},t),{},{error:e.error})}))})).flat()),p(u.map((function(e){return e.succeededArtists})).flat())}),[u]),(0,i.useEffect)((function(){var e=x.length+E.length;v||d||!u||e!==t.length||s()}),[v,d,u,s,x,E,t]),(0,f.jsx)("div",{className:"unfollow-all-list",children:(0,f.jsx)(S,{artists:[].concat((0,l.Z)(t.filter((function(e){return!x.find((function(t){return t.id===e.id}))})).filter((function(e){return-1===E.indexOf(e)})).map(b)),(0,l.Z)(x.map(C)),(0,l.Z)(E.map(Z))),unfollowing:!v&&d,completed:!v&&!d&&!!u,header:(0,f.jsxs)(f.Fragment,{children:[v&&(0,f.jsxs)("div",{className:"error loading-message",children:["Error unfollowing artists: ",v.message]}),!v&&d&&(0,f.jsx)("div",{className:"warning loading-message",children:"Unfollowing artists"}),!v&&!d&&u.length>0&&0===x.length&&(0,f.jsx)("div",{className:"success loading-message",children:"Unfollowed all artists!"}),!v&&!d&&u.length>0&&x.length>0&&(0,f.jsx)("div",{className:"error loading-message",children:"Could not unfollow some artists! Failed artists listed below"})]})})})},A=function(e){var t=e.artists,s=e.restartUnfollow,n=(0,i.useState)(!1),l=(0,r.Z)(n,2),a=l[0],o=l[1];return(0,f.jsxs)("div",{className:"artists-remove",children:[(0,f.jsx)(T,{artists:t,onComplete:function(){return o(!0)}}),a&&(0,f.jsx)("div",{className:"restart-unfollow",children:(0,f.jsx)("button",{className:"info",disabled:!a,onClick:s,children:"Unfollow more artists"})})]})},F=function(){return(0,f.jsxs)("div",{className:"list-legend",children:[(0,f.jsxs)("div",{className:"item normal",children:[(0,f.jsx)("div",{className:"color"}),(0,f.jsx)("div",{className:"text",children:"Not Selected"})]}),(0,f.jsxs)("div",{className:"item selected",children:[(0,f.jsx)("div",{className:"color"}),(0,f.jsx)("div",{className:"text",children:"Selected"})]})]})},k=function(e){var t=e.artists,s=e.selectedArtists,l=e.loadingResults,a=e.addArtist,o=e.removeArtist,c=(0,i.useState)(v.TEN),u=(0,r.Z)(c,2),d=u[0],x=u[1],j=(0,i.useState)(""),g=(0,r.Z)(j,2),N=g[0],E=g[1],p=(0,i.useState)(0),S=(0,r.Z)(p,2),b=S[0],Z=S[1];(0,i.useEffect)((function(){Z(0)}),[d,N]);var C=N.toLowerCase();return(0,f.jsx)("div",{className:"all-follows-list",children:(0,f.jsxs)("div",{className:"results-table",children:[(0,f.jsx)("div",{className:"results-table-options",children:(0,f.jsx)(w,{viewSize:d,setViewSize:x,filterString:N,setFilterString:E})}),(0,f.jsxs)("div",{className:"results-view",children:[(0,f.jsx)("h2",{className:"list-title",children:"Select artists to unfollow"}),(0,f.jsx)(F,{}),(0,f.jsx)("div",{className:"artist-list",children:t.filter((function(e){return""===C||e.name.toLowerCase().includes(C)})).slice(b*d,(b+1)*d).map((function(e){var t=-1!==s.indexOf(e);return(0,f.jsx)(m,{status:t?n.SELECTED:void 0,artist:e,onClick:function(){return t?o(e):a(e)}},e.id)}))}),l&&(0,f.jsx)(h.Z,{}),(0,f.jsxs)("div",{className:"pagination",children:[(0,f.jsx)("button",{className:"previous",onClick:function(){return Z((function(e){return e-1}))},disabled:0===b,children:"Previous"}),(0,f.jsx)("button",{className:"next",onClick:function(){return Z((function(e){return e+1}))},disabled:(b+1)*d>=t.length-1,children:"Next"})]})]})]})})},I=function(e){var t=e.selectedArtists,s=e.addArtistsForRemoval,n=e.removeArtistsForRemoval,a=(0,o.$s)(),c=(0,r.Z)(a,3),u=c[0],d=c[1],v=c[2],m=(0,i.useState)([]),x=(0,r.Z)(m,2),j=x[0],g=x[1];return(0,i.useEffect)((function(){if(0!==u.length){var e=u[u.length-1];g((function(t){return[].concat((0,l.Z)(t),(0,l.Z)(e))})),s.apply(void 0,(0,l.Z)(e))}}),[s,u]),(0,f.jsxs)("div",{className:"all-artist-follows",children:[v&&(0,f.jsxs)("div",{className:"error loading-message",children:["Error retrieving followed artists: ",v.message]}),!v&&d&&(0,f.jsx)("div",{className:"warning loading-message",children:"Retrieving followed artists"}),!v&&d&&0===j.length&&(0,f.jsx)(h.Z,{}),!v&&!d&&0===j.length&&(0,f.jsx)("div",{className:"error loading-message",children:"No followed artists found"}),!v&&j.length>0&&(0,f.jsx)(k,{loadingResults:!v&&d,artists:j,selectedArtists:t,addArtist:function(e){s(e)},removeArtist:function(e){n(e)}})]})},R=function(e){var t=e.selectedArtists,s=e.addArtists,n=e.removeArtists,r=e.startUnfollow;return(0,f.jsxs)("div",{className:"artists-select",children:[(0,f.jsx)(I,{selectedArtists:t,addArtistsForRemoval:s,removeArtistsForRemoval:n}),(0,f.jsx)("div",{className:"start-unfollow",children:(0,f.jsxs)("button",{className:u()("error",{disabled:0===t.length}),disabled:0===t.length,onClick:r,children:["Unfollow ",t.length," artists"]})})]})};!function(e){e.ARTIST_SELECT="artist-select",e.ARTIST_REMOVE="artist-remove"}(E||(E={}));var _=function(){var e=(0,i.useState)(E.ARTIST_SELECT),t=(0,r.Z)(e,2),s=t[0],n=t[1],l=(0,i.useState)(new Set),a=(0,r.Z)(l,2),o=a[0],c=a[1],u=(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return c((function(e){return t.forEach((function(t){return e.add(t)})),new Set(e)}))}),[]),d=(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return c((function(e){return t.forEach((function(t){return e.delete(t)})),new Set(e)}))}),[]);return(0,f.jsx)("div",{className:"unfollow-artists",children:s===E.ARTIST_SELECT?(0,f.jsx)(R,{selectedArtists:Array.from(o.values()),addArtists:u,removeArtists:d,startUnfollow:function(){return n(E.ARTIST_REMOVE)}}):(0,f.jsx)(A,{artists:Array.from(o.values()),restartUnfollow:function(){c(new Set),n(E.ARTIST_SELECT)}})})}}}]);
//# sourceMappingURL=402.319134b2.chunk.js.map
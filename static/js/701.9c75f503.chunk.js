"use strict";(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[701],{1848:function(e,n,t){t.d(n,{b:function(){return p},i:function(){return S}});var r=t(2982),o=t(885),a=t(184),i=t(2791),u=function(){return u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},u.apply(this,arguments)};var c="react-use-oauth2-state-key",l="react-use-oauth2-response",s=function(e){return new URLSearchParams(e).toString()},f=function(e){var n=new URLSearchParams(e);return Object.fromEntries(n.entries())},d=function(e,n){return e.postMessage(n)},h=function(e,n,t){clearInterval(e.current),n.current&&"function"==typeof n.current.close&&function(e){var n;null===(n=e.current)||void 0===n||n.close()}(n),sessionStorage.removeItem(c),window.removeEventListener("message",t)},v=function(e,n,t,r,o){var a=e.split("?")[0],i=f(e.split("?")[1]);return"".concat(a,"?").concat(s(u(u({},i),{client_id:n,grant_type:"authorization_code",code:t,redirect_uri:r,state:o})))},p=function(e){var n=e.Component,t=void 0===n?(0,a.jsx)("div",u({style:{margin:"12px"},"data-testid":"popup-loading"},{children:"Loading..."})):n;return(0,i.useEffect)((function(){var e=u(u({},f(window.location.search.split("?")[1])),f(window.location.hash.split("#")[1])),n=null==e?void 0:e.state,t=null==e?void 0:e.error,r=null===window||void 0===window?void 0:window.opener;if(!function(e){return null!=e}(r))throw new Error("No window opener");var o,a=n&&(o=n,sessionStorage.getItem(c)===o);if(!t&&a)d(r,{type:l,payload:e});else{var i=t?decodeURI(t):a?"OAuth error: An error has occured.":"OAuth error: State mismatch.";d(r,{type:l,error:i})}}),[]),t},m=new Map;function g(e,n){if(void 0===i.useSyncExternalStore)throw new TypeError('You are using React 17 or below. Install with "npm install use-local-storage-state@17".');var t=(0,i.useState)(null==n?void 0:n.defaultValue),r=(0,o.Z)(t,1)[0];if("undefined"==typeof window)return[r,function(){},{isPersistent:!0,removeItem:function(){}}];var a=null==n?void 0:n.serializer;return function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:JSON.stringify;if(!m.has(e)&&void 0!==n&&null===localStorage.getItem(e))try{localStorage.setItem(e,o(n))}catch(e){}var a=(0,i.useRef)({item:null,parsed:n}),u=(0,i.useSyncExternalStore)((0,i.useCallback)((function(n){var t=function(t){e===t&&n()};return y.add(t),function(){y.delete(t)}}),[e]),(function(){var t=localStorage.getItem(e);if(m.has(e))a.current={item:t,parsed:m.get(e)};else if(t!==a.current.item){var o;try{o=null===t?n:r(t)}catch(t){o=n}a.current={item:t,parsed:o}}return a.current.parsed}),(function(){return n})),c=(0,i.useCallback)((function(n){var t=n instanceof Function?n(a.current.parsed):n;try{localStorage.setItem(e,o(t)),m.delete(e)}catch(n){m.set(e,t)}w(e)}),[e,o]);return(0,i.useEffect)((function(){if(t){var n=function(n){n.storageArea===localStorage&&n.key===e&&w(e)};return window.addEventListener("storage",n),function(){return window.removeEventListener("storage",n)}}}),[e,t]),(0,i.useMemo)((function(){return[u,c,{isPersistent:u===n||!m.has(e),removeItem:function(){m.delete(e),localStorage.removeItem(e),w(e)}}]}),[e,c,u,n])}(e,r,null==n?void 0:n.storageSync,null==a?void 0:a.parse,null==a?void 0:a.stringify)}var y=new Set;function w(e){for(var n=0,t=(0,r.Z)(y);n<t.length;n++){(0,t[n])(e)}}function b(e){return"undefined"===e?void 0:JSON.parse(e)}var S=function(e){var n=e.authorizeUrl,t=e.clientId,r=e.redirectUri,o=e.scope,a=void 0===o?"":o,f=e.responseType,d=e.extraQueryParameters,p=void 0===d?{}:d,m=e.onSuccess,y=e.onError;!function(e){var n=e.authorizeUrl,t=e.clientId,r=e.redirectUri,o=e.responseType,a=e.extraQueryParameters,i=void 0===a?{}:a,u=e.onSuccess,c=e.onError;if(!(n&&t&&r&&o))throw new Error("Missing required props for useOAuth2. Required props are: {authorizeUrl, clientId, redirectUri, responseType}");if("code"===o&&!e.exchangeCodeForTokenServerURL)throw new Error('exchangeCodeForTokenServerURL is required for responseType of "code" for useOAuth2.');if("code"===o&&e.exchangeCodeForTokenMethod&&!["POST","GET"].includes(e.exchangeCodeForTokenMethod))throw new Error('Invalid exchangeCodeForTokenServerURL value. It can be one of "POST" or "GET".');if("object"!=typeof i)throw new TypeError("extraQueryParameters must be an object for useOAuth2.");if(u&&"function"!=typeof u)throw new TypeError("onSuccess callback must be a function for useOAuth2.");if(c&&"function"!=typeof c)throw new TypeError("onError callback must be a function for useOAuth2.")}(e);var w=(0,i.useRef)(p),b=(0,i.useRef)(),S=(0,i.useRef)(),E=(0,i.useState)({loading:!1,error:null}),P=E[0],x=P.loading,k=P.error,I=E[1],O=g("".concat(f,"-").concat(n,"-").concat(t,"-").concat(a),{defaultValue:null}),A=O[0],C=O[1],T=O[2],R=T.removeItem,U=T.isPersistent,L="code"===f&&e.exchangeCodeForTokenServerURL,j="code"===f&&e.exchangeCodeForTokenMethod,Z=(0,i.useCallback)((function(){I({loading:!0,error:null});var e,o,i,d,p,g=(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=new Uint8Array(40),window.crypto.getRandomValues(o),o=o.map((function(n){return e.codePointAt(n%62)})),String.fromCharCode.apply(null,o));function E(e){var n,o,a;return function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}c((r=r.apply(e,n||[])).next())}))}(this,void 0,void 0,(function(){var i,u,c;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(s){switch(s.label){case 0:if((null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)!==l)return[2];s.label=1;case 1:return s.trys.push([1,10,11,12]),"error"in e.data?(i=(null===(o=e.data)||void 0===o?void 0:o.error)||"Unknown Error occured.",I({loading:!1,error:i}),y?[4,y(i)]:[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return[3,9];case 4:return u=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.payload,"code"===f&&L?[4,fetch(v(L,t,null==u?void 0:u.code,r,g),{method:j||"POST"})]:[3,7];case 5:return[4,s.sent().json()];case 6:u=s.sent(),s.label=7;case 7:return I({loading:!1,error:null}),C(u),m?[4,m(u)]:[3,9];case 8:s.sent(),s.label=9;case 9:return[3,12];case 10:return c=s.sent(),console.error(c),I({loading:!1,error:c.toString()}),[3,12];case 11:return h(S,b,E),[7];case 12:return[2]}}))}))}return function(e){sessionStorage.setItem(c,e)}(g),b.current=(i=function(e,n,t,r,o,a,i){void 0===i&&(i={});var c=s(u({response_type:a,client_id:n,redirect_uri:t,scope:r,state:o},i));return"".concat(e,"?").concat(c)}(n,t,r,a,g,f,w.current),d=window.outerHeight/2+window.screenY-350,p=window.outerWidth/2+window.screenX-300,window.open(i,"OAuth2 Popup","height=".concat(700,",width=").concat(600,",top=").concat(d,",left=").concat(p))),window.addEventListener("message",E),S.current=setInterval((function(){var e,n,t;(!(null===(e=b.current)||void 0===e?void 0:e.window)||(null===(t=null===(n=b.current)||void 0===n?void 0:n.window)||void 0===t?void 0:t.closed))&&(I((function(e){return u(u({},e),{loading:!1})})),console.warn("Warning: Popup was closed before completing authentication."),h(S,b,E))}),250),function(){window.removeEventListener("message",E),S.current&&clearInterval(S.current)}}),[n,t,r,a,f,L,j,m,y,I,C]);return{data:A,loading:x,error:k,getAuth:Z,logout:(0,i.useCallback)((function(){R(),I({loading:!1,error:null})}),[R]),isPersistent:U}}},390:function(e,n,t){t.d(n,{aU:function(){return r},cP:function(){return h},lX:function(){return c}});var r,o=t(7462);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var a=function(e){return e};var i="beforeunload",u="popstate";function c(e){void 0===e&&(e={});var n=e.window,t=void 0===n?document.defaultView:n,c=t.history;function v(){var e=t.location,n=e.pathname,r=e.search,o=e.hash,i=c.state||{};return[i.idx,a({pathname:n,search:r,hash:o,state:i.usr||null,key:i.key||"default"})]}var p=null;t.addEventListener(u,(function(){if(p)S.call(p),p=null;else{var e=r.Pop,n=v(),t=n[0],o=n[1];if(S.length){if(null!=t){var a=y-t;a&&(p={action:e,location:o,retry:function(){O(-1*a)}},O(a))}}else I(e)}}));var m=r.Pop,g=v(),y=g[0],w=g[1],b=s(),S=s();function E(e){return"string"===typeof e?e:d(e)}function P(e,n){return void 0===n&&(n=null),a((0,o.Z)({pathname:w.pathname,hash:"",search:""},"string"===typeof e?h(e):e,{state:n,key:f()}))}function x(e,n){return[{usr:e.state,key:e.key,idx:n},E(e)]}function k(e,n,t){return!S.length||(S.call({action:e,location:n,retry:t}),!1)}function I(e){m=e;var n=v();y=n[0],w=n[1],b.call({action:m,location:w})}function O(e){c.go(e)}null==y&&(y=0,c.replaceState((0,o.Z)({},c.state,{idx:y}),""));var A={get action(){return m},get location(){return w},createHref:E,push:function e(n,o){var a=r.Push,i=P(n,o);if(k(a,i,(function(){e(n,o)}))){var u=x(i,y+1),l=u[0],s=u[1];try{c.pushState(l,"",s)}catch(f){t.location.assign(s)}I(a)}},replace:function e(n,t){var o=r.Replace,a=P(n,t);if(k(o,a,(function(){e(n,t)}))){var i=x(a,y),u=i[0],l=i[1];c.replaceState(u,"",l),I(o)}},go:O,back:function(){O(-1)},forward:function(){O(1)},listen:function(e){return b.push(e)},block:function(e){var n=S.push(e);return 1===S.length&&t.addEventListener(i,l),function(){n(),S.length||t.removeEventListener(i,l)}}};return A}function l(e){e.preventDefault(),e.returnValue=""}function s(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter((function(e){return e!==n}))}},call:function(n){e.forEach((function(e){return e&&e(n)}))}}}function f(){return Math.random().toString(36).substr(2,8)}function d(e){var n=e.pathname,t=void 0===n?"/":n,r=e.search,o=void 0===r?"":r,a=e.hash,i=void 0===a?"":a;return o&&"?"!==o&&(t+="?"===o.charAt(0)?o:"?"+o),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function h(e){var n={};if(e){var t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));var r=e.indexOf("?");r>=0&&(n.search=e.substr(r),e=e.substr(0,r)),e&&(n.pathname=e)}return n}},3504:function(e,n,t){t.d(n,{VK:function(){return u}});var r=t(885),o=t(2791),a=t(390),i=t(6871);function u(e){var n=e.basename,t=e.children,u=e.window,c=(0,o.useRef)();null==c.current&&(c.current=(0,a.lX)({window:u}));var l=c.current,s=(0,o.useState)({action:l.action,location:l.location}),f=(0,r.Z)(s,2),d=f[0],h=f[1];return(0,o.useLayoutEffect)((function(){return l.listen(h)}),[l]),(0,o.createElement)(i.F0,{basename:n,children:t,location:d.location,navigationType:d.action,navigator:l})}},6871:function(e,n,t){t.d(n,{AW:function(){return A},F0:function(){return C},Z5:function(){return T}});var r=t(885),o=t(390),a=t(2791),i=(0,a.createContext)(null);var u=(0,a.createContext)(null);var c=(0,a.createContext)({outlet:null,matches:[]});function l(e,n){if(!e)throw new Error(n)}function s(e,n,t){void 0===t&&(t="/");var r=E(("string"===typeof n?(0,o.cP)(n):n).pathname||"/",t);if(null==r)return null;var a=f(e);!function(e){e.sort((function(e,n){return e.score!==n.score?n.score-e.score:function(e,n){var t=e.length===n.length&&e.slice(0,-1).every((function(e,t){return e===n[t]}));return t?e[e.length-1]-n[n.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),n.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,u=0;null==i&&u<a.length;++u)i=b(a[u],r);return i}function f(e,n,t,r){return void 0===n&&(n=[]),void 0===t&&(t=[]),void 0===r&&(r=""),e.forEach((function(e,o){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||l(!1),a.relativePath=a.relativePath.slice(r.length));var i=P([r,a.relativePath]),u=t.concat(a);e.children&&e.children.length>0&&(!0===e.index&&l(!1),f(e.children,n,u,i)),(null!=e.path||e.index)&&n.push({path:i,score:w(i,e.index),routesMeta:u})})),n}var d=/^:\w+$/,h=3,v=2,p=1,m=10,g=-2,y=function(e){return"*"===e};function w(e,n){var t=e.split("/"),r=t.length;return t.some(y)&&(r+=g),n&&(r+=v),t.filter((function(e){return!y(e)})).reduce((function(e,n){return e+(d.test(n)?h:""===n?p:m)}),r)}function b(e,n){for(var t=e.routesMeta,r={},o="/",a=[],i=0;i<t.length;++i){var u=t[i],c=i===t.length-1,l="/"===o?n:n.slice(o.length)||"/",s=S({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},l);if(!s)return null;Object.assign(r,s.params);var f=u.route;a.push({params:r,pathname:P([o,s.pathname]),pathnameBase:x(P([o,s.pathnameBase])),route:f}),"/"!==s.pathnameBase&&(o=P([o,s.pathnameBase]))}return a}function S(e,n){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var t=function(e,n,t){void 0===n&&(n=!1);void 0===t&&(t=!0);var r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,n){return r.push(n),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):o+=t?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";var a=new RegExp(o,n?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),o=(0,r.Z)(t,2),a=o[0],i=o[1],u=n.match(a);if(!u)return null;var c=u[0],l=c.replace(/(.)\/+$/,"$1"),s=u.slice(1);return{params:i.reduce((function(e,n,t){if("*"===n){var r=s[t]||"";l=c.slice(0,c.length-r.length).replace(/(.)\/+$/,"$1")}return e[n]=function(e,n){try{return decodeURIComponent(e)}catch(t){return e}}(s[t]||""),e}),{}),pathname:c,pathnameBase:l,pattern:e}}function E(e,n){if("/"===n)return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;var t=e.charAt(n.length);return t&&"/"!==t?null:e.slice(n.length)||"/"}var P=function(e){return e.join("/").replace(/\/\/+/g,"/")},x=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")};function k(){return null!=(0,a.useContext)(u)}function I(){return k()||l(!1),(0,a.useContext)(u).location}function O(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(t,r,o){return(0,a.createElement)(c.Provider,{children:void 0!==r.route.element?r.route.element:t,value:{outlet:t,matches:n.concat(e.slice(0,o+1))}})}),null)}function A(e){l(!1)}function C(e){var n=e.basename,t=void 0===n?"/":n,r=e.children,c=void 0===r?null:r,s=e.location,f=e.navigationType,d=void 0===f?o.aU.Pop:f,h=e.navigator,v=e.static,p=void 0!==v&&v;k()&&l(!1);var m=x(t),g=(0,a.useMemo)((function(){return{basename:m,navigator:h,static:p}}),[m,h,p]);"string"===typeof s&&(s=(0,o.cP)(s));var y=s,w=y.pathname,b=void 0===w?"/":w,S=y.search,P=void 0===S?"":S,I=y.hash,O=void 0===I?"":I,A=y.state,C=void 0===A?null:A,T=y.key,R=void 0===T?"default":T,U=(0,a.useMemo)((function(){var e=E(b,m);return null==e?null:{pathname:e,search:P,hash:O,state:C,key:R}}),[m,b,P,O,C,R]);return null==U?null:(0,a.createElement)(i.Provider,{value:g},(0,a.createElement)(u.Provider,{children:c,value:{location:U,navigationType:d}}))}function T(e){var n=e.children,t=e.location;return function(e,n){k()||l(!1);var t,r=(0,a.useContext)(c).matches,i=r[r.length-1],u=i?i.params:{},f=(i&&i.pathname,i?i.pathnameBase:"/"),d=(i&&i.route,I());if(n){var h,v="string"===typeof n?(0,o.cP)(n):n;"/"===f||(null==(h=v.pathname)?void 0:h.startsWith(f))||l(!1),t=v}else t=d;var p=t.pathname||"/",m=s(e,{pathname:"/"===f?p:p.slice(f.length)||"/"});return O(m&&m.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:P([f,e.pathname]),pathnameBase:"/"===e.pathnameBase?f:P([f,e.pathnameBase])})})),r)}(R(n),t)}function R(e){var n=[];return a.Children.forEach(e,(function(e){if((0,a.isValidElement)(e))if(e.type!==a.Fragment){e.type!==A&&l(!1);var t={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(t.children=R(e.props.children)),n.push(t)}else n.push.apply(n,R(e.props.children))})),n}},907:function(e,n,t){function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,{Z:function(){return r}})},7462:function(e,n,t){function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(this,arguments)}t.d(n,{Z:function(){return r}})},885:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(181);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}return a}}(e,n)||(0,r.Z)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(907);var o=t(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(907);function o(e,n){if(e){if("string"===typeof e)return(0,r.Z)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,r.Z)(e,n):void 0}}}}]);
//# sourceMappingURL=701.9c75f503.chunk.js.map
"use strict";(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[346],{7818:function(e,l,n){n.r(l),n.d(l,{default:function(){return I}});var o=n(3433),s=n(9439),t=n(2791),i=n(6647),r=n(1413),a=n(7409),c=n(374),d=n(1694),u=n.n(d),f=n.p+"static/media/default.b315bfa5ca1ef960e55f.png",v=n.p+"static/media/spotify-logo.0c4ae91bae23217d39c9.png",p=n(184),w=function(e){var l,n,o=e.follow,s=e.status,t=e.onClick,r=e.description;return(0,p.jsxs)("div",{className:u()("follow",s,{clickable:!!t}),onClick:function(e){if(!e.target.classList.contains("follow-link")&&!e.target.classList.contains("spotify-link-logo"))return null===t||void 0===t?void 0:t()},children:[(0,p.jsx)("div",{className:"avatar",children:(0,p.jsx)("img",{src:null!==(l=null===(n=o.images[0])||void 0===n?void 0:n.url)&&void 0!==l?l:f,alt:"".concat(o.name," Avatar")})}),(0,p.jsx)("h3",{className:"name",children:o.name}),(0,p.jsx)("div",{className:"type",children:i.BC[o.type]}),(0,p.jsxs)("a",{className:"follow-link",href:o.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",children:["View on ",(0,p.jsx)("img",{className:"spotify-link-logo",src:v,alt:"Spotify Logo"})]}),r&&(0,p.jsx)("div",{className:"description",children:r})]})},h=function(e){var l=e.value,n=e.placeholder,o=e.onChange;return(0,p.jsx)("input",{type:"text",placeholder:n,value:l,onChange:function(e){return o(e.target.value)}})},m=n(415),x=n(9632),g=function(e){var l=e.options,n=e.value,o=e.disabled,s=void 0!==o&&o,t=e.onChange;return(0,p.jsx)(m.ZP,{styles:{option:function(e,l){return(0,r.Z)((0,r.Z)({},e),{},{background:l.isFocused?"#282828":"#121212",color:"#d8f3e0"})},control:function(e){return(0,r.Z)((0,r.Z)({},e),{},{border:"1px solid #d8f3e0",background:"#121212",borderRadius:"0"})},menu:function(e){return(0,r.Z)((0,r.Z)({},e),{},{background:"#121212",border:"1px solid #d8f3e0"})},singleValue:function(e){return(0,r.Z)((0,r.Z)({},e),{},{color:"#d8f3e0"})},valueContainer:function(e){return(0,r.Z)({},e)}},captureMenuScroll:!1,isDisabled:s,value:l.find((function(e){return e.id===n})),onChange:function(e){return function(e){return"object"===typeof e&&!(0,x.l)(e)&&"id"in e&&"label"in e}(e)&&(null===t||void 0===t?void 0:t(e.id))},options:l})},j=n(9963),N=n(484),Z=function(e){return e[e.FIFTY=50]="FIFTY",e[e.TWENTY_FIVE=25]="TWENTY_FIVE",e[e.TEN=10]="TEN",e}({}),y=[{label:Z.TEN,id:Z.TEN},{label:Z.TWENTY_FIVE,id:Z.TWENTY_FIVE},{label:Z.FIFTY,id:Z.FIFTY}],b=function(e){var l=e.followTypes,n=e.setFollowTypes,s=e.viewSize,r=e.setViewSize,a=e.filterString,c=e.setFilterString,d=(0,t.useContext)(j.Z).permissions;return(0,p.jsxs)("div",{className:"follow-list-options",children:[(0,p.jsx)("h2",{children:"Options"}),(0,p.jsxs)("div",{className:"type-option",children:[(0,p.jsx)("span",{children:"Types:"}),i.hc.filter((function(e){var l=e.permission;return d.has(l)})).map((function(e){return(0,p.jsx)("div",{className:"option-".concat(e.id),children:(0,p.jsxs)("label",{children:[(0,p.jsx)(N.Z,{checked:l.includes(e.id),disabled:l.includes(e.id)&&1===l.length,onChange:function(s){return s?null===n||void 0===n?void 0:n.apply(void 0,(0,o.Z)(new Set([].concat((0,o.Z)(l),[e.id])))):null===n||void 0===n?void 0:n.apply(void 0,(0,o.Z)(new Set(l.filter((function(l){return l!==e.id})))))}}),(0,p.jsx)("span",{children:e.label})]})},e.id)}))]}),(0,p.jsx)("hr",{}),(0,x.l)(a)||(0,x.l)(c)?null:(0,p.jsx)("div",{className:"filter-option",children:(0,p.jsxs)("label",{children:[(0,p.jsx)("span",{children:"Search:"}),(0,p.jsx)(h,{value:a,onChange:c})]})}),(0,p.jsx)("div",{className:"view-option",children:(0,p.jsxs)("label",{children:[(0,p.jsx)("span",{children:"Results per page:"}),(0,p.jsx)(g,{value:s,onChange:r,options:y})]})}),(0,p.jsx)("button",{className:"warning",onClick:function(){null===c||void 0===c||c(""),r(Z.TEN)},children:"Reset"})]})},F=function(e){var l=e.followTypes,n=e.follows,o=e.unfollowing,i=e.completed,r=e.header,a=(0,t.useState)(Z.TEN),d=(0,s.Z)(a,2),u=d[0],f=d[1],v=(0,t.useState)(0),h=(0,s.Z)(v,2),m=h[0],x=h[1];(0,t.useEffect)((function(){x(0)}),[u]),(0,t.useEffect)((function(){i&&x(0)}),[i]);var g=n.filter((function(e){return"failed"===e.status})),j=i&&g.length>0?g:n;return(0,p.jsx)("div",{className:"unfollow-follows-list",children:(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsx)("div",{className:"results-table-options",children:(0,p.jsx)(b,{followTypes:l,viewSize:u,setViewSize:f})}),(0,p.jsxs)("div",{className:"results-view",children:[r,o&&(0,p.jsx)(c.Z,{}),(0,p.jsx)("div",{className:"follow-list",children:j.slice(m*u,(m+1)*u).map((function(e){return(0,p.jsx)(w,{status:e.status,follow:e.follow,description:(l=e,"failed"===l.status?"Could not unfollow. Error: ".concat(e.error.message):void 0)},e.follow.id);var l}))}),(0,p.jsxs)("div",{className:"pagination",children:[(0,p.jsx)("button",{className:"previous",onClick:function(){return x((function(e){return e-1}))},disabled:0===m,children:"Previous"}),(0,p.jsx)("button",{className:"next",onClick:function(){return x((function(e){return e+1}))},disabled:(m+1)*u>=n.length-1,children:"Next"})]})]})]})})},T=function(e){return{follow:e,status:"selected"}},S=function(e){return{follow:e,status:"succeeded"}},C=function(e){return(0,r.Z)((0,r.Z)({},e),{},{status:"failed"})},E=function(e){var l=e.followTypes,n=e.follows,r=e.onComplete,c=(0,t.useState)([]),d=(0,s.Z)(c,2),u=d[0],f=d[1],v=(0,t.useState)([]),w=(0,s.Z)(v,2),h=w[0],m=w[1],x=(0,t.useCallback)((function(e){(0,i.mS)(e)?m((function(l){return[].concat((0,o.Z)(l),(0,o.Z)(e.succeeded))})):f((function(l){return[].concat((0,o.Z)(l),(0,o.Z)(e.failed.map((function(l){return{follow:l,error:e.error}}))))}))}),[m,f]),g=(0,a.gX)(n,x),j=(0,s.Z)(g,3),N=j[0],Z=j[1],y=j[2];return(0,t.useEffect)((function(){var e=u.length+h.length;0===y.length&&!Z&&N&&e===n.length&&r()}),[y,Z,N,r,u,h,n]),(0,p.jsx)("div",{className:"unfollow-all-list",children:(0,p.jsx)(F,{followTypes:l,follows:[].concat((0,o.Z)(u.map(C)),(0,o.Z)(n.filter((function(e){return!u.find((function(l){return l.follow.id===e.id}))})).filter((function(e){return-1===h.indexOf(e)})).map(T)),(0,o.Z)(h.map(S))),unfollowing:0===y.length&&Z,completed:0===y.length&&!Z&&!!N,header:(0,p.jsxs)(p.Fragment,{children:[y.length>0&&(0,p.jsxs)("div",{className:"error loading-message",children:["Error unfollowing ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l))),":",(0,p.jsx)("ul",{children:y.map((function(e,l){return(0,p.jsx)("li",{children:e.message},l)}))})]}),0===y.length&&Z&&(0,p.jsxs)("div",{className:"warning loading-message",children:["Unfollowing ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l)))]}),0===y.length&&!Z&&N.length>0&&0===u.length&&(0,p.jsxs)("div",{className:"success loading-message",children:["Unfollowed all ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l))),"!"]}),0===y.length&&!Z&&N.length>0&&u.length>0&&(0,p.jsxs)("div",{className:"error loading-message",children:["Could not unfollow some ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l))),"! Failed"," ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l)))," listed below"]})]})})})},k=function(e){var l=e.followTypes,n=e.follows,r=e.restartUnfollow,a=(0,t.useState)(!1),c=(0,s.Z)(a,2),d=c[0],u=c[1];return(0,p.jsxs)("div",{className:"follows-remove",children:[(0,p.jsx)(E,{followTypes:l,follows:n,onComplete:function(){return u(!0)}}),d&&(0,p.jsx)("div",{className:"restart-unfollow",children:(0,p.jsxs)("button",{className:"info",disabled:!d,onClick:r,children:["Unfollow more ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l)))]})})]})},M=function(){return(0,p.jsxs)("div",{className:"list-legend",children:[(0,p.jsxs)("div",{className:"item normal",children:[(0,p.jsx)("div",{className:"color"}),(0,p.jsx)("div",{className:"text",children:"Not Selected"})]}),(0,p.jsxs)("div",{className:"item selected",children:[(0,p.jsx)("div",{className:"color"}),(0,p.jsx)("div",{className:"text",children:"Selected"})]})]})},_=function(e){var l=e.loading,n=e.followTypes,r=e.follows,a=e.selectedFollows,d=e.setFollowTypes,u=e.addFollow,f=e.removeFollow,v=(0,t.useState)(Z.TEN),h=(0,s.Z)(v,2),m=h[0],x=h[1],g=(0,t.useState)(""),j=(0,s.Z)(g,2),N=j[0],y=j[1],F=(0,t.useState)(0),T=(0,s.Z)(F,2),S=T[0],C=T[1];(0,t.useEffect)((function(){C(0)}),[m,N]);var E=N.toLowerCase();return(0,p.jsx)("div",{className:"all-follows-list",children:(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsx)("div",{className:"results-table-options",children:(0,p.jsx)(b,{followTypes:n,setFollowTypes:d,viewSize:m,setViewSize:x,filterString:N,setFilterString:y})}),(0,p.jsxs)("div",{className:"results-view",children:[(0,p.jsxs)("h2",{className:"list-title",children:["Select ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(n)))," to unfollow"]}),(0,p.jsx)(M,{}),l&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"warning loading-message",children:["Retrieving followed ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(n)))]}),(0,p.jsx)(c.Z,{})]}),(0,p.jsxs)("div",{className:"artist-list",children:[!l&&0===r.length&&(0,p.jsxs)("div",{className:"error loading-message",children:["No followed ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(n)))," found"]}),r.filter((function(e){return""===E||e.name.toLowerCase().includes(E)})).slice(S*m,(S+1)*m).map((function(e){var l=-1!==a.indexOf(e);return(0,p.jsx)(w,{status:l?"selected":void 0,follow:e,onClick:function(){return l?f(e):u(e)}},e.id)}))]}),(0,p.jsxs)("div",{className:"pagination",children:[(0,p.jsx)("button",{className:"previous",onClick:function(){return C((function(e){return e-1}))},disabled:0===S,children:"Previous"}),(0,p.jsx)("button",{className:"next",onClick:function(){return C((function(e){return e+1}))},disabled:(S+1)*m>=r.length-1,children:"Next"})]})]})]})})},V=function(e){var l=e.followTypes,n=e.setFollowTypes,t=e.selectedFollows,r=e.addFollowsForRemoval,c=e.removeFollowsFromRemoval,d=(0,a.$s)(l,r),u=(0,s.Z)(d,3),f=u[0],v=u[1],w=u[2];return(0,p.jsxs)("div",{className:"all-follows",children:[w.length>0&&(0,p.jsxs)("div",{className:"error loading-message",children:["Error retrieving followed ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l))),":",(0,p.jsx)("ul",{children:w.map((function(e,l){return(0,p.jsx)("li",{children:e.message},l)}))})]}),(0,p.jsx)(_,{loading:v,followTypes:l,setFollowTypes:n,follows:f,selectedFollows:t,addFollow:function(e){r(e)},removeFollow:function(e){c(e)}})]})},R=function(e){var l=e.followTypes,n=e.setFollowTypes,s=e.selectedFollows,t=e.addFollows,r=e.removeFollows,a=e.startUnfollow;return(0,p.jsxs)("div",{className:"follows-select",children:[(0,p.jsx)(V,{followTypes:l,setFollowTypes:n,selectedFollows:s,addFollowsForRemoval:t,removeFollowsFromRemoval:r}),(0,p.jsx)("div",{className:"start-unfollow",children:(0,p.jsxs)("button",{className:u()("error",{disabled:0===s.length}),disabled:0===s.length,onClick:a,children:["Unfollow ",s.length," ",i.Md.apply(void 0,[i.ev].concat((0,o.Z)(l)))]})})]})},L=function(e){return e.SELECT="select",e.REMOVE="remove",e}(L||{}),I=function(){var e=(0,t.useContext)(j.Z).permissions,l=(0,t.useState)(new Set((0,o.Z)(e).map((function(e){return i.hc.find((function(l){return l.permission===e}))})).map((function(e){return null===e||void 0===e?void 0:e.id})))),n=(0,s.Z)(l,2),r=n[0],a=n[1],c=(0,t.useState)(L.SELECT),d=(0,s.Z)(c,2),u=d[0],f=d[1],v=(0,t.useState)(new Set),w=(0,s.Z)(v,2),h=w[0],m=w[1],x=(0,t.useMemo)((function(){return(0,o.Z)(r)}),[r]);(0,t.useEffect)((function(){m((function(e){return(0,o.Z)(e).filter((function(e){return!i.JC.apply(void 0,(0,o.Z)(r)).includes(e.type)})).forEach((function(l){return e.delete(l)})),new Set(e)}))}),[r,m]);var g=(0,t.useCallback)((function(){for(var e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];a(new Set(l))}),[a]),N=(0,t.useCallback)((function(){for(var e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];return m((function(e){return l.forEach((function(l){return e.add(l)})),new Set(e)}))}),[m]),Z=(0,t.useCallback)((function(){for(var e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];return m((function(e){return l.forEach((function(l){return e.delete(l)})),new Set(e)}))}),[m]);return(0,p.jsx)("div",{className:"unfollow-follows",children:u===L.SELECT?(0,p.jsx)(R,{followTypes:x,setFollowTypes:g,selectedFollows:(0,o.Z)(h),addFollows:N,removeFollows:Z,startUnfollow:function(){return f(L.REMOVE)}}):(0,p.jsx)(k,{followTypes:x,follows:(0,o.Z)(h),restartUnfollow:function(){m(new Set),f(L.SELECT)}})})}}}]);
//# sourceMappingURL=346.925ed976.chunk.js.map
/*! For license information please see 367.375ab697.chunk.js.LICENSE.txt */
(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[367],{4387:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});n(2791);var r=n(2063),o=n(184),s=function(e){var t=e.checked,n=e.disabled,s=e.onChange;return(0,o.jsx)(r.Z,{checked:t,disabled:n,onChange:function(e){return s(e.target.checked)}})}},7367:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(2982),o=n(885),s=n(2791),i=n(1848),a=n(4547),c=function(){var e=(0,s.useState)(!0),t=(0,o.Z)(e,2)[1];return(0,s.useCallback)((function(){return t((function(e){return!e}))}),[])},u=n(374),l=n(4387),d=n(184),f=function(e){var t=e.permissionOptions,n=e.addPermissionOption,r=e.removePermissionOption,o=e.onClick;return(0,d.jsxs)("div",{className:"login",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:"Permissions to allow"}),(0,d.jsxs)("div",{className:"permission-options",children:[(0,d.jsx)("div",{className:"unfollow-artists-users",children:(0,d.jsxs)("label",{children:[(0,d.jsx)(l.Z,{checked:t.includes("artists-users"),disabled:t.includes("artists-users")&&1===t.length,onChange:function(e){return e?n("artists-users"):r("artists-users")}}),(0,d.jsx)("span",{children:"Read/Modify Followed Artists/Users"})]})}),(0,d.jsx)("div",{className:"unfollow-shows",children:(0,d.jsxs)("label",{children:[(0,d.jsx)(l.Z,{checked:t.includes("shows"),disabled:t.includes("shows")&&1===t.length,onChange:function(e){return e?n("shows"):r("shows")}}),(0,d.jsx)("span",{children:"Read/Modify Followed Shows (Podcasts)"})]})})]})]}),(0,d.jsx)("button",{className:"success",onClick:o,children:"Login with Spotify"})]})},h=n(6647),p=n(9963),v=new Map;var y=new Set;function g(e){for(var t=0,n=(0,r.Z)(y);t<n.length;t++){(0,n[t])(e)}}function k(e){return"undefined"===e?void 0:JSON.parse(e)}var m,b=function(e,t){if(void 0===s.useSyncExternalStore)throw new TypeError('You are using React 17 or below. Install with "npm install use-local-storage-state@17".');var n=(0,s.useState)(null===t||void 0===t?void 0:t.defaultValue),r=(0,o.Z)(n,1)[0];if("undefined"===typeof window)return[r,function(){},{isPersistent:!0,removeItem:function(){}}];var i=null===t||void 0===t?void 0:t.serializer;return function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:JSON.stringify;if(!v.has(e)&&void 0!==t&&null===localStorage.getItem(e))try{localStorage.setItem(e,o(t))}catch(u){}var i=(0,s.useRef)({item:null,parsed:t}),a=(0,s.useSyncExternalStore)((0,s.useCallback)((function(t){var n=function(n){e===n&&t()};return y.add(n),function(){y.delete(n)}}),[e]),(function(){var n=localStorage.getItem(e);if(v.has(e))i.current={item:n,parsed:v.get(e)};else if(n!==i.current.item){var o;try{o=null===n?t:r(n)}catch(u){o=t}i.current={item:n,parsed:o}}return i.current.parsed}),(function(){return t})),c=(0,s.useCallback)((function(t){var n=t instanceof Function?t(i.current.parsed):t;try{localStorage.setItem(e,o(n)),v.delete(e)}catch(u){v.set(e,n)}g(e)}),[e,o]);return(0,s.useEffect)((function(){if(n){var t=function(t){t.storageArea===localStorage&&t.key===e&&g(e)};return window.addEventListener("storage",t),function(){return window.removeEventListener("storage",t)}}}),[e,n]),(0,s.useMemo)((function(){return[a,c,{isPersistent:a===t||!v.has(e),removeItem:function(){v.delete(e),localStorage.removeItem(e),g(e)}}]}),[e,c,a,t])}(e,r,null===t||void 0===t?void 0:t.storageSync,null===i||void 0===i?void 0:i.parse,null===i||void 0===i?void 0:i.stringify)},w=(0,s.lazy)((function(){return Promise.all([n.e(42),n.e(409),n.e(166)]).then(n.bind(n,1166))})),S=(0,s.lazy)((function(){return Promise.all([n.e(42),n.e(699),n.e(409),n.e(346)]).then(n.bind(n,7818))})),C=(0,s.lazy)((function(){return n.e(656).then(n.bind(n,4656))}));!function(e){e.ACCESS_DENIED="access_denied"}(m||(m={}));var x=function(){var e=b("permissions",{defaultValue:["artists-users"]}),t=(0,o.Z)(e,2),n=t[0],l=t[1],v=(0,s.useMemo)((function(){return new Set(n)}),[n]),y=(0,s.useMemo)((function(){return n.flatMap((function(e){return h.M_[e]}))}),[n]),g=(0,i.i)({authorizeUrl:"https://accounts.spotify.com/authorize",scope:y.join(","),clientId:"9c6dd9b27991421a87a5bc6867705a27",redirectUri:document.location.href.replace(/\/$/,"")+"/callback",responseType:"token"}),k=g.data,x=g.loading,j=g.error,T=g.getAuth,O=g.logout,_=c();a.ZP.resetToken=function(){O(),_()},(0,s.useEffect)((function(){null!==k&&void 0!==k&&k.access_token?a.ZP.userToken=k.access_token:a.ZP.userToken=void 0,_()}),[k,_]);var E=(0,s.useCallback)((function(e){return l((function(t){return(0,r.Z)(new Set([].concat((0,r.Z)(t),[e])))}))}),[l]),P=(0,s.useCallback)((function(e){return l((function(t){return(0,r.Z)(new Set(t.filter((function(t){return t!==e}))))}))}),[l]);return x?(0,d.jsx)(u.Z,{text:"Logging in"}):j?(0,d.jsx)("div",{className:"login-error",children:(0,d.jsx)("div",{className:"error",children:j===m.ACCESS_DENIED?"Could not log in as access was denied during authorization process":"Could not log in due to an unknown error"})}):null!==k&&void 0!==k&&k.access_token?(0,d.jsx)(p.Z.Provider,{value:{permissions:v,logout:O},children:(0,d.jsxs)(s.Suspense,{fallback:(0,d.jsx)(u.Z,{}),children:[(0,d.jsx)(w,{}),(0,d.jsxs)(s.Suspense,{fallback:(0,d.jsx)(u.Z,{}),children:[(0,d.jsx)(S,{}),(0,d.jsx)(C,{})]})]})}):(0,d.jsx)(f,{onClick:T,permissionOptions:n,addPermissionOption:E,removePermissionOption:P})}},9963:function(e,t,n){"use strict";var r=(0,n(2791).createContext)({permissions:new Set,logout:function(){}});t.Z=r},4547:function(e,t,n){"use strict";n.d(t,{RN:function(){return s},uO:function(){return i}});var r=n(3144),o=n(5671),s="https://api.spotify.com/v1",i=50,a=new(function(){return(0,r.Z)((function e(){(0,o.Z)(this,e),this.userToken=void 0,this.resetToken=function(){}}))}());t.ZP=a},6647:function(e,t,n){"use strict";n.d(t,{JC:function(){return i},M_:function(){return o},Md:function(){return u},NC:function(){return c},ev:function(){return a},hc:function(){return l},mS:function(){return d}});var r=n(2982),o={"artists-users":["user-follow-read","user-follow-modify"],shows:["user-library-read","user-library-modify"]},s={ARTIST:"artist",USER:"user",SHOW:"show"},i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(t.values()).map((function(e){return s[e]}))},a={user:"users",artist:"artists",show:"shows (podcasts)"},c={user:"Users",artist:"Artists",show:"Shows (Podcasts)"},u=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return i.apply(void 0,n).map((function(t){return e[t]})).join(", ")},l=[{label:u(c,"ARTIST"),id:"ARTIST",permission:"artists-users"},{label:u(c,"SHOW"),id:"SHOW",permission:"shows"}],d=function(e){return"succeeded"in e}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===s)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},888:function(e,t,n){"use strict";var r=n(9047);function o(){}function s(){}s.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,s,i){if(i!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:o};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2791),s=(r=o)&&r.__esModule?r:{default:r};t.default=function(){return s.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11"},s.default.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}))}},2063:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2791),i=f(s),a=f(n(1694)),c=f(n(2007)),u=f(n(5851)),l=f(n(2274)),d=n(5039);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.handleTouchStart=n.handleTouchStart.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handleTouchEnd=n.handleTouchEnd.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.previouslyChecked=!(!e.checked&&!e.defaultChecked),n.state={checked:!(!e.checked&&!e.defaultChecked),hasFocus:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:function(e){e.checked!==this.props.checked&&this.setState({checked:!!this.props.checked})}},{key:"handleClick",value:function(e){if(!this.props.disabled){var t=this.input;if(e.target!==t&&!this.moved)return this.previouslyChecked=t.checked,e.preventDefault(),t.focus(),void t.click();var n=this.props.hasOwnProperty("checked")?this.props.checked:t.checked;this.setState({checked:n})}}},{key:"handleTouchStart",value:function(e){this.props.disabled||(this.startX=(0,d.pointerCoord)(e).x,this.activated=!0)}},{key:"handleTouchMove",value:function(e){if(this.activated&&(this.moved=!0,this.startX)){var t=(0,d.pointerCoord)(e).x;this.state.checked&&t+15<this.startX?(this.setState({checked:!1}),this.startX=t,this.activated=!0):t-15>this.startX&&(this.setState({checked:!0}),this.startX=t,this.activated=t<this.startX+5)}}},{key:"handleTouchEnd",value:function(e){if(this.moved){var t=this.input;if(e.preventDefault(),this.startX){var n=(0,d.pointerCoord)(e).x;!0===this.previouslyChecked&&this.startX+4>n?this.previouslyChecked!==this.state.checked&&(this.setState({checked:!1}),this.previouslyChecked=this.state.checked,t.click()):this.startX-4<n&&this.previouslyChecked!==this.state.checked&&(this.setState({checked:!0}),this.previouslyChecked=this.state.checked,t.click()),this.activated=!1,this.startX=null,this.moved=!1}}}},{key:"handleFocus",value:function(e){var t=this.props.onFocus;t&&t(e),this.setState({hasFocus:!0})}},{key:"handleBlur",value:function(e){var t=this.props.onBlur;t&&t(e),this.setState({hasFocus:!1})}},{key:"getIcon",value:function(e){var n=this.props.icons;return n?void 0===n[e]?t.defaultProps.icons[e]:n[e]:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=(t.icons,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["className","icons"])),s=(0,a.default)("react-toggle",{"react-toggle--checked":this.state.checked,"react-toggle--focus":this.state.hasFocus,"react-toggle--disabled":this.props.disabled},n);return i.default.createElement("div",{className:s,onClick:this.handleClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},i.default.createElement("div",{className:"react-toggle-track"},i.default.createElement("div",{className:"react-toggle-track-check"},this.getIcon("checked")),i.default.createElement("div",{className:"react-toggle-track-x"},this.getIcon("unchecked"))),i.default.createElement("div",{className:"react-toggle-thumb"}),i.default.createElement("input",r({},o,{ref:function(t){e.input=t},onFocus:this.handleFocus,onBlur:this.handleBlur,className:"react-toggle-screenreader-only",type:"checkbox"})))}}]),t}(s.PureComponent);t.Z=h,h.displayName="Toggle",h.defaultProps={icons:{checked:i.default.createElement(u.default,null),unchecked:i.default.createElement(l.default,null)}},h.propTypes={checked:c.default.bool,disabled:c.default.bool,defaultChecked:c.default.bool,onChange:c.default.func,onFocus:c.default.func,onBlur:c.default.func,className:c.default.string,name:c.default.string,value:c.default.string,id:c.default.string,"aria-labelledby":c.default.string,"aria-label":c.default.string,icons:c.default.oneOfType([c.default.bool,c.default.shape({checked:c.default.node,unchecked:c.default.node})])}},5039:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointerCoord=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var n=t[0];return{x:n.clientX,y:n.clientY}}var r=e.pageX;if(void 0!==r)return{x:r,y:e.pageY}}return{x:0,y:0}}},2274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2791),s=(r=o)&&r.__esModule?r:{default:r};t.default=function(){return s.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},s.default.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"}))}},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return o}})}}]);
//# sourceMappingURL=367.375ab697.chunk.js.map
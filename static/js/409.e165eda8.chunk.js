"use strict";(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[409],{7409:function(t,e,n){n.d(e,{$s:function(){return ct},tZ:function(){return rt},gX:function(){return ot}});var r=n(885),u=n(2982),a=n(2791),c=n(4165),s=n(5861),o=function(t,e){for(var n=arguments.length,u=new Array(n>2?n-2:0),o=2;o<n;o++)u[o-2]=arguments[o];var i=(0,a.useState)(),f=(0,r.Z)(i,2),p=f[0],v=f[1],Z=(0,a.useState)(),h=(0,r.Z)(Z,2),l=h[0],d=h[1],x=(0,a.useState)(!1),k=(0,r.Z)(x,2),m=k[0],w=k[1];return(0,a.useEffect)((function(){if(e){w(!0),v(void 0),d(void 0);var n=!1;return(0,s.Z)((0,c.Z)().mark((function e(){var r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.apply(void 0,u);case 3:r=e.sent,n||v(r),w(!1),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),"AbortError"===(a=e.t0).name||n||d(a),w(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))(),function(){n=!0}}}),[t,e].concat(u)),[p,m,l]},i=n(6296),f=function(t,e){for(var n=arguments.length,o=new Array(n>2?n-2:0),f=2;f<n;f++)o[f-2]=arguments[f];var p=(0,a.useState)([]),v=(0,r.Z)(p,2),Z=v[0],h=v[1],l=(0,a.useState)(),d=(0,r.Z)(l,2),x=d[0],k=d[1],m=(0,a.useState)(!1),w=(0,r.Z)(m,2),b=w[0],y=w[1];return(0,a.useEffect)((function(){if(e){y(!0),h([]),k(void 0);var n=!1;return(0,s.Z)((0,c.Z)().mark((function e(){var r,a,s,f,p,v,Z;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=!1,a=!1,e.prev=3,f=function(){var t=v.value;if(y(!0),n)return"break";h((function(e){return[].concat((0,u.Z)(e),[t])}))},p=(0,i.Z)(t.apply(void 0,o));case 6:return e.next=8,p.next();case 8:if(!(r=!(v=e.sent).done)){e.next=15;break}if("break"!==f()){e.next=12;break}return e.abrupt("break",15);case 12:r=!1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),a=!0,s=e.t0;case 21:if(e.prev=21,e.prev=22,!r||null==p.return){e.next=26;break}return e.next=26,p.return();case 26:if(e.prev=26,!a){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(21);case 31:y(!1),e.next=39;break;case 34:e.prev=34,e.t1=e.catch(0),"AbortError"===(Z=e.t1).name||n||k(Z),y(!1);case 39:case"end":return e.stop()}}),e,null,[[0,34],[3,17,21,31],[22,,26,30]])})))(),function(){n=!0}}}),[t,e].concat(o)),[Z,b,x]},p=n(1413),v=n(6420),Z=n(608),h=n(9632),l=n(4547),d=function(t){return t.json()},x=n(5671),k=n(3144),m=n(136),w=n(516),b=function(t){(0,m.Z)(n,t);var e=(0,w.Z)(n);function n(t,r,u){var a;return(0,x.Z)(this,n),(a=e.call(this,"Error has occurred performing the request due to error: ".concat(r," [Status Code: ").concat(t,"]")))._status=void 0,a._body=void 0,a._headers=void 0,a._status=t,a._body=r,a._headers=u,a}return(0,k.Z)(n,[{key:"status",get:function(){return this._status}},{key:"body",get:function(){return this._body}},{key:"headers",get:function(){return this._headers}}]),n}((0,n(8737).Z)(Error)),y=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e,n,r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(u,a){var s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={attemptCount:0,maxAttemptCount:3},t.t0=E,t.t1=u,t.t2=a,t.next=6,fetch(e,n);case 6:t.t3=t.sent,t.t4=s,t.t5=e,t.t6=n,t.t7=r,(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5,t.t6,t.t7);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),E=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e,n,r,u,a,s,o){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.ok){t.next=4;break}e(r),t.next=18;break;case 4:if(!(u.attemptCount<u.maxAttemptCount&&S(r.status,o))){t.next=9;break}u.attemptCount++,g(e,n,r,u,a,s,o),t.next=18;break;case 9:return t.t0=n,t.t1=b,t.t2=r.status,t.next=14,r.json();case 14:t.t3=t.sent.error.message,t.t4=r.headers,t.t5=new t.t1(t.t2,t.t3,t.t4),(0,t.t0)(t.t5);case 18:case"end":return t.stop()}}),t)})));return function(e,n,r,u,a,c,s){return t.apply(this,arguments)}}(),g=function(t,e,n,r,u,a,o){setTimeout((0,s.Z)((0,c.Z)().mark((function n(){var s;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(u,a);case 2:s=n.sent,E(t,e,s,r,u,a,o);case 4:case"end":return n.stop()}}),n)}))),function(t,e){var n=t.headers.get("Retry-After")||"0";return Math.max(1e3*Math.pow(2,e.attemptCount-1),Number(n))}(n,r))},S=function(t,e){return t>=500||e&&e.indexOf(t)>=0},_=y,C=function(t){return t?"?"+Object.keys(t).filter((function(e){return!(0,h.l)(t[e])})).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&"):""},O=function(t,e,n){return{headers:(0,p.Z)({Authorization:"Bearer ".concat(l.ZP.userToken)},e),body:t,method:n}},T=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e,n,r,a,s){var o,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[l.RN].concat((0,u.Z)(e)).join("/")+"/",i=C(n),t.abrupt("return",_(o+i,O(r,a,s),[429]).catch((function(t){throw 401!==t.status||l.ZP.resetToken(),t})));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r,u,a){return t.apply(this,arguments)}}(),A=T,j=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e,n,r){var u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d,t.next=3,A(["me","following"],{type:e,limit:n,after:r});case 3:return t.t1=t.sent,t.next=6,(0,t.t0)(t.t1);case 6:return u=t.sent,t.abrupt("return","artist"===e?u.artists:u.users);case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),M=j,N=function(t){return"user"===t.type},J=function(){var t=(0,Z.Z)((0,c.Z)().mark((function t(e){var n,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=void 0;case 1:return t.next=3,(0,v.Z)(M(e,l.uO,n));case 3:return r=t.sent,t.next=6,r.items.map((function(t){return N(t)?(0,p.Z)((0,p.Z)({},t),{},{name:t.display_name}):t}));case 6:n=r.cursors.after;case 7:if(!(0,h.l)(n)){t.next=1;break}case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=J,D=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e,n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d,t.next=3,A(["me","shows"],{limit:e,offset:n});case 3:return t.t1=t.sent,t.next=6,(0,t.t0)(t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),L=D,P=function(){var t=(0,Z.Z)((0,c.Z)().mark((function t(){var e,n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=void 0;case 1:return t.next=3,(0,v.Z)(L(l.uO,e));case 3:return n=t.sent,t.next=6,n.items.map((function(t){return t.show}));case 6:(e=n.offset+n.limit)>=n.total&&(e=void 0);case 8:if(!(0,h.l)(e)){t.next=1;break}case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=P,z=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d,t.next=3,A(["me"]);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=z,H=n(7762),I=function(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,Math.min(t.length,r+e)));return n},U=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(["me","following"],{type:"artist"},JSON.stringify({ids:e.map((function(t){return t.id}))}),{"Content-Type":"application/json"},"DELETE");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=U,X=function(){var t=(0,Z.Z)((0,c.Z)().mark((function t(e){var n,r,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,H.Z)(I(e,l.uO)),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}return u=r.value,t.prev=5,t.next=8,(0,v.Z)(W(u));case 8:return t.next=10,{succeeded:u};case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,{failed:u,error:t.t0};case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(1),n.e(t.t1);case 23:return t.prev=23,n.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,20,23,26],[5,12]])})));return function(e){return t.apply(this,arguments)}}(),$=X,F=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(["me","shows"],{},JSON.stringify({ids:e.map((function(t){return t.id}))}),{"Content-Type":"application/json"},"DELETE");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=F,K=function(){var t=(0,Z.Z)((0,c.Z)().mark((function t(e){var n,r,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,H.Z)(I(e,l.uO)),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}return u=r.value,t.prev=5,t.next=8,(0,v.Z)(G(u));case 8:return t.next=10,{succeeded:u};case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,{failed:u,error:t.t0};case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(1),n.e(t.t1);case 23:return t.prev=23,n.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,20,23,26],[5,12]])})));return function(e){return t.apply(this,arguments)}}(),Q=K,V=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(["me","following"],{type:"user"},JSON.stringify({ids:e.map((function(t){return t.id}))}),{"Content-Type":"application/json"},"DELETE");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=V,tt=function(){var t=(0,Z.Z)((0,c.Z)().mark((function t(e){var n,r,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,H.Z)(I(e,l.uO)),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}return u=r.value,t.prev=5,t.next=8,(0,v.Z)(Y(u));case 8:return t.next=10,{succeeded:u};case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(5),t.next=16,{failed:u,error:t.t0};case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(1),n.e(t.t1);case 23:return t.prev=23,n.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,20,23,26],[5,12]])})));return function(e){return t.apply(this,arguments)}}(),et=tt,nt=n(6647),rt=function(){return o(B,!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},ut=function(t,e,n){if(0!==n.length){var r=n[n.length-1];t((function(t){return[].concat((0,u.Z)(t),(0,u.Z)(r))})),e.apply(void 0,(0,u.Z)(r))}},at=function(t,e){e&&t((function(t){return[].concat((0,u.Z)(t),[e])}))},ct=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=f(R,n&&t.includes("ARTIST"),"artist"),s=(0,r.Z)(c,3),o=s[0],i=s[1],p=s[2],v=f(R,n&&t.includes("USER"),"user"),Z=(0,r.Z)(v,3),h=Z[0],l=Z[1],d=Z[2],x=f(q,n&&t.includes("SHOW")),k=(0,r.Z)(x,3),m=k[0],w=k[1],b=k[2],y=(0,a.useState)([]),E=(0,r.Z)(y,2),g=E[0],S=E[1];(0,a.useEffect)((function(){return ut(S,e,o)}),[o,e,S]),(0,a.useEffect)((function(){return ut(S,e,h)}),[h,e,S]),(0,a.useEffect)((function(){return ut(S,e,m)}),[m,e,S]);var _=(0,a.useState)([]),C=(0,r.Z)(_,2),O=C[0],T=C[1];return(0,a.useEffect)((function(){return at(T,p)}),[p,T]),(0,a.useEffect)((function(){return at(T,d)}),[d,T]),(0,a.useEffect)((function(){return at(T,b)}),[b,T]),(0,a.useEffect)((function(){var e=nt.JC.apply(void 0,(0,u.Z)(t));S((function(t){return t.filter((function(t){var n=t.type;return e.includes(n)}))}))}),[t,S,T]),[g,i||l||w,O]},st=function(t,e,n){if(0!==n.length){var r=n[n.length-1];t((function(t){return[].concat((0,u.Z)(t),[r])})),e(r)}},ot=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=(0,a.useMemo)((function(){return t.filter((function(t){return"artist"===t.type}))}),[t]),c=(0,a.useMemo)((function(){return t.filter((function(t){return"user"===t.type}))}),[t]),s=(0,a.useMemo)((function(){return t.filter((function(t){return"show"===t.type}))}),[t]),o=f($,n,u),i=(0,r.Z)(o,3),p=i[0],v=i[1],Z=i[2],h=f(et,n,c),l=(0,r.Z)(h,3),d=l[0],x=l[1],k=l[2],m=f(Q,n,s),w=(0,r.Z)(m,3),b=w[0],y=w[1],E=w[2],g=(0,a.useState)([]),S=(0,r.Z)(g,2),_=S[0],C=S[1];(0,a.useEffect)((function(){return st(C,e,p)}),[p,e,C]),(0,a.useEffect)((function(){return st(C,e,d)}),[d,e,C]),(0,a.useEffect)((function(){return st(C,e,b)}),[b,e,C]);var O=(0,a.useState)([]),T=(0,r.Z)(O,2),A=T[0],j=T[1];return(0,a.useEffect)((function(){return at(j,Z)}),[Z,j]),(0,a.useEffect)((function(){return at(j,k)}),[k,j]),(0,a.useEffect)((function(){return at(j,E)}),[E,j]),[_,v||x||y,A]}},9632:function(t,e,n){n.d(e,{l:function(){return r}});var r=function(t){return null===t||void 0===t}}}]);
//# sourceMappingURL=409.e165eda8.chunk.js.map
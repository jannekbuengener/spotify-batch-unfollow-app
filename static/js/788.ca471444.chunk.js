"use strict";(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[788],{773:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var n,r=s(885),i=s(2791),l=s(2982),a=s(1413),o=s(4537),c=s(1694),u=s.n(c),d=s.p+"static/media/default.b315bfa5ca1ef960e55f.png",f=s.p+"static/media/spotify-logo.0c4ae91bae23217d39c9.png",v=s(184);!function(e){e.SELECTED="selected",e.SUCCEEEDED="succeeded",e.FAILED="failed"}(n||(n={}));var m,h=function(e){var t,s,n=e.artist,r=e.status,i=e.onClick,l=e.description;return(0,v.jsxs)("div",{className:u()("artist",r,{clickable:!!i}),onClick:function(e){if(!e.target.classList.contains("artist-link")&&!e.target.classList.contains("spotify-link-logo"))return null===i||void 0===i?void 0:i()},children:[(0,v.jsx)("div",{className:"avatar",children:(0,v.jsx)("img",{src:null!==(t=null===(s=n.images[0])||void 0===s?void 0:s.url)&&void 0!==t?t:d,alt:"Artist ".concat(n.name)})}),(0,v.jsx)("h3",{className:"name",children:n.name}),(0,v.jsxs)("a",{className:"artist-link",href:n.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",children:["View on ",(0,v.jsx)("img",{className:"spotify-link-logo",src:f,alt:"Spotify Logo"})]}),l&&(0,v.jsx)("div",{className:"description",children:l})]})},x=s(374),g=function(e){return null===e||void 0===e},j=function(e){var t=e.value,s=e.placeholder,n=e.onChange;return(0,v.jsx)("input",{type:"text",placeholder:s,value:t,onChange:function(e){return n(e.target.value)}})},N=s(8699),p=function(e){var t=e.options,s=e.value,n=e.onChange;return(0,v.jsx)(N.ZP,{styles:{option:function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{background:t.isFocused?"#282828":"#121212",color:"#d8f3e0"})},control:function(e){return(0,a.Z)((0,a.Z)({},e),{},{border:"1px solid #d8f3e0",background:"#121212",borderRadius:"0"})},menu:function(e){return(0,a.Z)((0,a.Z)({},e),{},{background:"#121212",border:"1px solid #d8f3e0"})},singleValue:function(e){return(0,a.Z)((0,a.Z)({},e),{},{color:"#d8f3e0"})},valueContainer:function(e){return(0,a.Z)({},e)}},captureMenuScroll:!1,value:t.find((function(e){return e.id===s})),onChange:function(e){return function(e){return"object"===typeof e&&!g(e)&&"id"in e&&"label"in e}(e)&&n(e.id)},options:t})};!function(e){e[e.FIFTY=50]="FIFTY",e[e.TWENTY_FIVE=25]="TWENTY_FIVE",e[e.TEN=10]="TEN"}(m||(m={}));var E,w=[{label:m.TEN,id:m.TEN},{label:m.TWENTY_FIVE,id:m.TWENTY_FIVE},{label:m.FIFTY,id:m.FIFTY}],S=function(e){var t=e.viewSize,s=e.setViewSize,n=e.filterString,r=e.setFilterString;return(0,v.jsxs)("div",{className:"artist-list-options",children:[(0,v.jsx)("h2",{children:"View options"}),!g(n)&&r&&(0,v.jsxs)("div",{className:"filter-option",children:[(0,v.jsx)("label",{children:"Search artists:"}),(0,v.jsx)(j,{value:n,onChange:r})]}),!g(t)&&s&&(0,v.jsxs)("div",{className:"view-option",children:[(0,v.jsx)("label",{children:"Artists per page:"}),(0,v.jsx)(p,{value:t,onChange:s,options:w})]}),(0,v.jsx)("button",{className:"warning",onClick:function(){null===r||void 0===r||r(""),null===s||void 0===s||s(m.TEN)},children:"Reset"})]})},b=function(e){var t=e.artists,s=e.unfollowing,l=e.completed,a=e.header,o=(0,i.useState)(m.TEN),c=(0,r.Z)(o,2),u=c[0],d=c[1],f=(0,i.useState)(0),g=(0,r.Z)(f,2),j=g[0],N=g[1];(0,i.useEffect)((function(){N(0)}),[u]),(0,i.useEffect)((function(){l&&N(0)}),[l]);var p=t.filter((function(e){return e.status===n.FAILED})),E=l&&p.length>0?p:t;return(0,v.jsx)("div",{className:"unfollow-artists-list",children:(0,v.jsxs)("div",{className:"results-table",children:[(0,v.jsx)("div",{className:"results-table-options",children:(0,v.jsx)(S,{viewSize:u,setViewSize:d})}),(0,v.jsxs)("div",{className:"results-view",children:[a,s&&(0,v.jsx)(x.Z,{}),(0,v.jsx)("div",{className:"artist-list",children:E.slice(j*u,(j+1)*u).map((function(e){return(0,v.jsx)(h,{status:e.status,artist:e,description:e.error?"Could not unfollow. Error: ".concat(e.error.message):void 0},e.id)}))}),(0,v.jsxs)("div",{className:"pagination",children:[(0,v.jsx)("button",{className:"previous",onClick:function(){return N((function(e){return e-1}))},disabled:0===j,children:"Previous"}),(0,v.jsx)("button",{className:"next",onClick:function(){return N((function(e){return e+1}))},disabled:(j+1)*u>=t.length-1,children:"Next"})]})]})]})})},Z=function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:n.SELECTED})},C=function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:n.SUCCEEEDED})},T=function(e){return(0,a.Z)((0,a.Z)({},e),{},{status:n.FAILED})},A=function(e){var t=e.artists,s=e.onComplete,n=(0,o.jk)(t),c=(0,r.Z)(n,3),u=c[0],d=c[1],f=c[2],m=(0,i.useState)([]),h=(0,r.Z)(m,2),x=h[0],g=h[1],j=(0,i.useState)([]),N=(0,r.Z)(j,2),p=N[0],E=N[1];return(0,i.useEffect)((function(){g(u.map((function(e){return e.failedArtists.map((function(t){return(0,a.Z)((0,a.Z)({},t),{},{error:e.error})}))})).flat()),E(u.map((function(e){return e.succeededArtists})).flat())}),[u]),(0,i.useEffect)((function(){var e=x.length+p.length;f||d||!u||e!==t.length||s()}),[f,d,u,s,x,p,t]),(0,v.jsx)("div",{className:"unfollow-all-list",children:(0,v.jsx)(b,{artists:[].concat((0,l.Z)(t.filter((function(e){return!x.find((function(t){return t.id===e.id}))})).filter((function(e){return-1===p.indexOf(e)})).map(Z)),(0,l.Z)(x.map(T)),(0,l.Z)(p.map(C))),unfollowing:!f&&d,completed:!f&&!d&&!!u,header:(0,v.jsxs)(v.Fragment,{children:[f&&(0,v.jsxs)("div",{className:"error loading-message",children:["Error unfollowing artists: ",f.message]}),!f&&d&&(0,v.jsx)("div",{className:"warning loading-message",children:"Unfollowing artists"}),!f&&!d&&u.length>0&&0===x.length&&(0,v.jsx)("div",{className:"success loading-message",children:"Unfollowed all artists!"}),!f&&!d&&u.length>0&&x.length>0&&(0,v.jsx)("div",{className:"error loading-message",children:"Could not unfollow some artists! Failed artists listed below"})]})})})},k=function(e){var t=e.artists,s=e.restartUnfollow,n=(0,i.useState)(!1),l=(0,r.Z)(n,2),a=l[0],o=l[1];return(0,v.jsxs)("div",{className:"artists-remove",children:[(0,v.jsx)(A,{artists:t,onComplete:function(){return o(!0)}}),a&&(0,v.jsx)("div",{className:"restart-unfollow",children:(0,v.jsx)("button",{className:"info",disabled:!a,onClick:s,children:"Unfollow more artists"})})]})},F=function(){return(0,v.jsxs)("div",{className:"list-legend",children:[(0,v.jsxs)("div",{className:"item normal",children:[(0,v.jsx)("div",{className:"color"}),(0,v.jsx)("div",{className:"text",children:"Not Selected"})]}),(0,v.jsxs)("div",{className:"item selected",children:[(0,v.jsx)("div",{className:"color"}),(0,v.jsx)("div",{className:"text",children:"Selected"})]})]})},_=function(e){var t=e.artists,s=e.selectedArtists,l=e.loadingResults,a=e.addArtist,o=e.removeArtist,c=(0,i.useState)(m.TEN),u=(0,r.Z)(c,2),d=u[0],f=u[1],g=(0,i.useState)(""),j=(0,r.Z)(g,2),N=j[0],p=j[1],E=(0,i.useState)(0),w=(0,r.Z)(E,2),b=w[0],Z=w[1];(0,i.useEffect)((function(){Z(0)}),[d,N]);var C=N.toLowerCase();return(0,v.jsx)("div",{className:"all-follows-list",children:(0,v.jsxs)("div",{className:"results-table",children:[(0,v.jsx)("div",{className:"results-table-options",children:(0,v.jsx)(S,{viewSize:d,setViewSize:f,filterString:N,setFilterString:p})}),(0,v.jsxs)("div",{className:"results-view",children:[(0,v.jsx)("h2",{className:"list-title",children:"Select artists to unfollow"}),(0,v.jsx)(F,{}),(0,v.jsx)("div",{className:"artist-list",children:t.filter((function(e){return""===C||e.name.toLowerCase().includes(C)})).slice(b*d,(b+1)*d).map((function(e){var t=-1!==s.indexOf(e);return(0,v.jsx)(h,{status:t?n.SELECTED:void 0,artist:e,onClick:function(){return t?o(e):a(e)}},e.id)}))}),l&&(0,v.jsx)(x.Z,{}),(0,v.jsxs)("div",{className:"pagination",children:[(0,v.jsx)("button",{className:"previous",onClick:function(){return Z((function(e){return e-1}))},disabled:0===b,children:"Previous"}),(0,v.jsx)("button",{className:"next",onClick:function(){return Z((function(e){return e+1}))},disabled:(b+1)*d>=t.length-1,children:"Next"})]})]})]})})},I=function(e){var t=e.selectedArtists,s=e.addArtistsForRemoval,n=e.removeArtistsForRemoval,a=(0,o.$s)(),c=(0,r.Z)(a,3),u=c[0],d=c[1],f=c[2],m=(0,i.useState)([]),h=(0,r.Z)(m,2),g=h[0],j=h[1];return(0,i.useEffect)((function(){if(0!==u.length){var e=u[u.length-1];j((function(t){return[].concat((0,l.Z)(t),(0,l.Z)(e))})),s.apply(void 0,(0,l.Z)(e))}}),[s,u]),(0,v.jsxs)("div",{className:"all-artist-follows",children:[f&&(0,v.jsxs)("div",{className:"error loading-message",children:["Error retrieving followed artists: ",f.message]}),!f&&d&&(0,v.jsx)("div",{className:"warning loading-message",children:"Retrieving followed artists"}),!f&&d&&0===g.length&&(0,v.jsx)(x.Z,{}),!f&&!d&&0===g.length&&(0,v.jsx)("div",{className:"error loading-message",children:"No followed artists found"}),!f&&g.length>0&&(0,v.jsx)(_,{loadingResults:!f&&d,artists:g,selectedArtists:t,addArtist:function(e){s(e)},removeArtist:function(e){n(e)}})]})},R=function(e){var t=e.selectedArtists,s=e.addArtists,n=e.removeArtists,r=e.startUnfollow;return(0,v.jsxs)("div",{className:"artists-select",children:[(0,v.jsx)(I,{selectedArtists:t,addArtistsForRemoval:s,removeArtistsForRemoval:n}),(0,v.jsx)("div",{className:"start-unfollow",children:(0,v.jsxs)("button",{className:u()("error",{disabled:0===t.length}),disabled:0===t.length,onClick:r,children:["Unfollow ",t.length," artists"]})})]})};!function(e){e.ARTIST_SELECT="artist-select",e.ARTIST_REMOVE="artist-remove"}(E||(E={}));var y=function(){var e=(0,i.useState)(E.ARTIST_SELECT),t=(0,r.Z)(e,2),s=t[0],n=t[1],l=(0,i.useState)(new Set),a=(0,r.Z)(l,2),o=a[0],c=a[1],u=(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return c((function(e){return t.forEach((function(t){return e.add(t)})),new Set(e)}))}),[]),d=(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return c((function(e){return t.forEach((function(t){return e.delete(t)})),new Set(e)}))}),[]);return(0,v.jsx)("div",{className:"unfollow-artists",children:s===E.ARTIST_SELECT?(0,v.jsx)(R,{selectedArtists:Array.from(o.values()),addArtists:u,removeArtists:d,startUnfollow:function(){return n(E.ARTIST_REMOVE)}}):(0,v.jsx)(k,{artists:Array.from(o.values()),restartUnfollow:function(){c(new Set),n(E.ARTIST_SELECT)}})})}}}]);
//# sourceMappingURL=788.ca471444.chunk.js.map